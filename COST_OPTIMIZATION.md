# ğŸ’° ë¹„ìš© ìµœì í™” ê°€ì´ë“œ

Claude API ë¹„ìš©ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•

---

## ğŸ“Š í˜„ì¬ ë¹„ìš© êµ¬ì¡°

### Claude 3.5 Sonnet ê°€ê²©
- **Input**: $3 / 1M tokens
- **Output**: $15 / 1M tokens

### í† í° ì‚¬ìš© ì˜ˆìƒ

#### ë‰´ìŠ¤ ë¶„ì„ 1íšŒ
```
Input:
- ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸: ~500 tokens
- ë‰´ìŠ¤ ì œëª©+ë‚´ìš©: ~1,000 tokens
- ì´ Input: ~1,500 tokens

Output:
- JSON ë¶„ì„ ê²°ê³¼: ~300 tokens

ë¹„ìš©: (1,500 Ã— $3 + 300 Ã— $15) / 1,000,000 = $0.009
```

#### ë¸”ë¡œê·¸ ê¸€ ìƒì„± 1íšŒ
```
Input:
- ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸: ~1,000 tokens
- ë‰´ìŠ¤ 3-5ê°œ ì»¨í…ìŠ¤íŠ¸: ~3,000 tokens
- ì´ Input: ~4,000 tokens

Output:
- ë¸”ë¡œê·¸ ê¸€ (1,500-2,000ì): ~2,000 tokens

ë¹„ìš©: (4,000 Ã— $3 + 2,000 Ã— $15) / 1,000,000 = $0.042
```

---

## ğŸ’¸ ì‹œë‚˜ë¦¬ì˜¤ë³„ ì˜ˆìƒ ë¹„ìš©

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë¯¸ë‹ˆë©€ (ì›” $15-20)

**ì„¤ì •:**
```env
NEWS_COLLECTION_INTERVAL=7200  # 2ì‹œê°„
ANALYSIS_INTERVAL=14400  # 4ì‹œê°„
ARTICLE_GENERATION_INTERVAL=28800  # 8ì‹œê°„
MIN_RELEVANCE_SCORE=85
```

**ì¼ì¼ ì‘ì—…:**
- ë‰´ìŠ¤ ìˆ˜ì§‘: 12íšŒ â†’ ìˆ˜ì§‘ 60ê°œ
- ë‰´ìŠ¤ ë¶„ì„: 6íšŒ â†’ ë¶„ì„ 30ê°œ
- ê¸€ ìƒì„±: 3íšŒ â†’ ê¸€ 9ê°œ

**ì›”ê°„ ë¹„ìš©:**
```
ë¶„ì„: 30ê°œ/ì¼ Ã— 30ì¼ Ã— $0.009 = $8.10
ê¸€ ìƒì„±: 9ê°œ/ì¼ Ã— 30ì¼ Ã— $0.042 = $11.34
ì´: $19.44
```

**ì¥ë‹¨ì :**
- âœ… ì €ë¹„ìš©
- âŒ ì»¨í…ì¸  ë¶€ì¡± (9ê°œ/ì¼)
- âŒ ì‹¤ì‹œê°„ì„± ë–¨ì–´ì§

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë°¸ëŸ°ìŠ¤ (ì›” $25-35) â­ ì¶”ì²œ

**ì„¤ì •:**
```env
NEWS_COLLECTION_INTERVAL=3600  # 1ì‹œê°„
ANALYSIS_INTERVAL=7200  # 2ì‹œê°„
ARTICLE_GENERATION_INTERVAL=14400  # 4ì‹œê°„
MIN_RELEVANCE_SCORE=80
```

**ì¼ì¼ ì‘ì—…:**
- ë‰´ìŠ¤ ìˆ˜ì§‘: 24íšŒ â†’ ìˆ˜ì§‘ 120ê°œ
- ë‰´ìŠ¤ ë¶„ì„: 12íšŒ â†’ ë¶„ì„ 60ê°œ
- ê¸€ ìƒì„±: 6íšŒ â†’ ê¸€ 18ê°œ

**ì›”ê°„ ë¹„ìš©:**
```
ë¶„ì„: 60ê°œ/ì¼ Ã— 30ì¼ Ã— $0.009 = $16.20
ê¸€ ìƒì„±: 18ê°œ/ì¼ Ã— 30ì¼ Ã— $0.042 = $22.68
ì´: $38.88
```

**ì¥ë‹¨ì :**
- âœ… ì ì • ë¹„ìš©
- âœ… ì¶©ë¶„í•œ ì»¨í…ì¸  (18ê°œ/ì¼)
- âœ… í•©ë¦¬ì  ì‹¤ì‹œê°„ì„±
- â­ **ìµœê³ ì˜ ê°€ì„±ë¹„**

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì ê·¹í˜• (ì›” $50-70)

**ì„¤ì •:**
```env
NEWS_COLLECTION_INTERVAL=1800  # 30ë¶„
ANALYSIS_INTERVAL=3600  # 1ì‹œê°„
ARTICLE_GENERATION_INTERVAL=7200  # 2ì‹œê°„
MIN_RELEVANCE_SCORE=75
```

**ì¼ì¼ ì‘ì—…:**
- ë‰´ìŠ¤ ìˆ˜ì§‘: 48íšŒ â†’ ìˆ˜ì§‘ 240ê°œ
- ë‰´ìŠ¤ ë¶„ì„: 24íšŒ â†’ ë¶„ì„ 120ê°œ
- ê¸€ ìƒì„±: 12íšŒ â†’ ê¸€ 36ê°œ

**ì›”ê°„ ë¹„ìš©:**
```
ë¶„ì„: 120ê°œ/ì¼ Ã— 30ì¼ Ã— $0.009 = $32.40
ê¸€ ìƒì„±: 36ê°œ/ì¼ Ã— 30ì¼ Ã— $0.042 = $45.36
ì´: $77.76
```

**ì¥ë‹¨ì :**
- âœ… í’ë¶€í•œ ì»¨í…ì¸  (36ê°œ/ì¼)
- âœ… ë†’ì€ ì‹¤ì‹œê°„ì„±
- âœ… SEO ìœ ë¦¬
- âŒ ë¹„ìš© ì¦ê°€

---

### ì‹œë‚˜ë¦¬ì˜¤ 4: í”„ë¦¬ë¯¸ì—„ (ì›” $100+)

**ì„¤ì •:**
```env
NEWS_COLLECTION_INTERVAL=900  # 15ë¶„
ANALYSIS_INTERVAL=1800  # 30ë¶„
ARTICLE_GENERATION_INTERVAL=3600  # 1ì‹œê°„
MIN_RELEVANCE_SCORE=70
```

**ì¼ì¼ ì‘ì—…:**
- ë‰´ìŠ¤ ìˆ˜ì§‘: 96íšŒ â†’ ìˆ˜ì§‘ 480ê°œ
- ë‰´ìŠ¤ ë¶„ì„: 48íšŒ â†’ ë¶„ì„ 240ê°œ
- ê¸€ ìƒì„±: 24íšŒ â†’ ê¸€ 72ê°œ

**ì›”ê°„ ë¹„ìš©:**
```
ë¶„ì„: 240ê°œ/ì¼ Ã— 30ì¼ Ã— $0.009 = $64.80
ê¸€ ìƒì„±: 72ê°œ/ì¼ Ã— 30ì¼ Ã— $0.042 = $90.72
ì´: $155.52
```

**ì¥ë‹¨ì :**
- âœ… ìµœëŒ€ ì»¨í…ì¸  (72ê°œ/ì¼)
- âœ… ì‹¤ì‹œê°„ ë‰´ìŠ¤
- âœ… ìµœê³ ì˜ SEO
- âŒ ë†’ì€ ë¹„ìš©

---

## ğŸ¯ ë¹„ìš© ì ˆê° ì „ëµ

### 1. í•„í„°ë§ ê°•í™”

#### MIN_RELEVANCE_SCORE ì¡°ì •
```env
MIN_RELEVANCE_SCORE=70  â†’ 80
```

**íš¨ê³¼:**
- ë¶„ì„ í†µê³¼ìœ¨: 24% â†’ 15%
- ì›”ê°„ ë¹„ìš©: -30%

#### ì¢…ëª© ë¦¬ìŠ¤íŠ¸ ì¶•ì†Œ
```python
# config/settings.py
TRACKED_SYMBOLS = [
    "AAPL", "MSFT", "GOOGL", "AMZN", "TSLA"  # 20ê°œ â†’ 5ê°œ
]
```

**íš¨ê³¼:**
- ê´€ë ¨ ë‰´ìŠ¤: -60%
- ì›”ê°„ ë¹„ìš©: -40%

---

### 2. ê°„ê²© ì¡°ì •

#### ë¹„ëŒ€ì¹­ ê°„ê²© ì„¤ì •
```env
# ë‰´ìŠ¤ ìˆ˜ì§‘: ìì£¼ (ë°ì´í„° ìˆ˜ì§‘)
NEWS_COLLECTION_INTERVAL=1800  # 30ë¶„

# ë‰´ìŠ¤ ë¶„ì„: ëœ ìì£¼ (ë¹„ìš© ë°œìƒ)
ANALYSIS_INTERVAL=7200  # 2ì‹œê°„

# ê¸€ ìƒì„±: ë” ëœ ìì£¼ (ê³ ë¹„ìš©)
ARTICLE_GENERATION_INTERVAL=14400  # 4ì‹œê°„
```

**íš¨ê³¼:**
- ì‹¤ì‹œê°„ì„± ìœ ì§€
- ë¶„ì„/ìƒì„± ë¹„ìš© -50%

---

### 3. ë°°ì¹˜ ì²˜ë¦¬

#### analyzers/relevance_analyzer.py ìˆ˜ì •
```python
def batch_analyze(self, news_list: List[Dict], batch_size: int = 10) -> List[Dict]:
    """ì—¬ëŸ¬ ë‰´ìŠ¤ë¥¼ í•œ ë²ˆì— ë¶„ì„ (ë¹„ìš© ì ˆê°)"""

    # 10ê°œì”© ë¬¶ì–´ì„œ í•œ ë²ˆì— ìš”ì²­
    batches = [news_list[i:i+batch_size] for i in range(0, len(news_list), batch_size)]

    for batch in batches:
        # í•˜ë‚˜ì˜ í”„ë¡¬í”„íŠ¸ë¡œ 10ê°œ ë¶„ì„
        analysis = self._analyze_batch(batch)
```

**íš¨ê³¼:**
- API í˜¸ì¶œ ìˆ˜: -90%
- í† í° íš¨ìœ¨: +30% (ì¤‘ë³µ í”„ë¡¬í”„íŠ¸ ì œê±°)
- ì›”ê°„ ë¹„ìš©: -20%

---

### 4. ìºì‹± ì „ëµ

#### ì¤‘ë³µ ë‰´ìŠ¤ ì‚¬ì „ í•„í„°ë§
```python
# collectors/base.py
def collect_and_save(self) -> int:
    # ì œëª© ìœ ì‚¬ë„ ì²´í¬ (ë¬´ë£Œ)
    similar_news = self._check_similarity(news.title)
    if similar_news:
        continue  # Claude ë¶„ì„ ê±´ë„ˆë›°ê¸°
```

**íš¨ê³¼:**
- ì¤‘ë³µ ë¶„ì„ ì œê±°
- ì›”ê°„ ë¹„ìš©: -15%

---

### 5. Alpha Vantage ë¹„í™œì„±í™”

ë¬´ë£Œ ì œí•œ(25 req/ì¼)ì´ ìˆìœ¼ë¯€ë¡œ:

```python
# scheduler/jobs.py
self.collectors = [
    FinnhubCollector(self.db),
    # AlphaVantageCollector(self.db),  # ì£¼ì„ ì²˜ë¦¬
    RSSCollector(self.db)
]
```

**íš¨ê³¼:**
- API ì œí•œ ê±±ì • ì—†ìŒ
- ë‰´ìŠ¤ í’ˆì§ˆ: ì—¬ì „íˆ ìš°ìˆ˜ (Finnhub + RSS)

---

## ğŸ“ˆ ROI ê³„ì‚°

### ìˆ˜ìµ ëª¨ë¸ ì˜ˆìƒ

#### Google AdSense
```
ì¼ì¼ ë°©ë¬¸ì: 1,000ëª…
í˜ì´ì§€ë·°/ë°©ë¬¸: 2.5
RPM (1,000 í˜ì´ì§€ë·°ë‹¹ ìˆ˜ìµ): $5-15

ì›”ê°„ ìˆ˜ìµ:
1,000 Ã— 2.5 Ã— 30 Ã— ($10/1,000) = $750
```

#### ì†ìµë¶„ê¸°ì 
```
ë¹„ìš©: $39/ì›” (ë°¸ëŸ°ìŠ¤ ì‹œë‚˜ë¦¬ì˜¤)
ìˆ˜ìµ: $750/ì›” (AdSense)

ìˆœìµ: $711/ì›”
ROI: 1,825%
```

#### í•„ìš” íŠ¸ë˜í”½ (ì†ìµë¶„ê¸°ì )
```
ë¹„ìš©: $39/ì›”
RPM: $10

í•„ìš” í˜ì´ì§€ë·°: 39 / 10 Ã— 1,000 = 3,900/ì›” = 130/ì¼

í•„ìš” ë°©ë¬¸ì: 130 / 2.5 = 52ëª…/ì¼
```

**ê²°ë¡ : í•˜ë£¨ 52ëª… ë°©ë¬¸ìë©´ ì†ìµë¶„ê¸°**

---

## ğŸ”§ ì‹¤ì‹œê°„ ë¹„ìš© ëª¨ë‹ˆí„°ë§

### Anthropic Console í™•ì¸
```
1. https://console.anthropic.com/settings/usage ì ‘ì†
2. ì¼ì¼/ì›”ê°„ ì‚¬ìš©ëŸ‰ í™•ì¸
3. ì˜ˆì‚° ì´ˆê³¼ ì‹œ ì¦‰ì‹œ ê°„ê²© ì¡°ì •
```

### ìë™ ë¹„ìš© ì¶”ì  ìŠ¤í¬ë¦½íŠ¸
```python
# scripts/cost_monitor.py
import anthropic

client = anthropic.Anthropic()

# ì´ë²ˆ ë‹¬ ì‚¬ìš©ëŸ‰
usage = client.usage.list(
    start_date="2025-11-01",
    end_date="2025-11-30"
)

print(f"Input tokens: {usage.input_tokens:,}")
print(f"Output tokens: {usage.output_tokens:,}")
print(f"Cost: ${usage.cost:.2f}")

# ì˜ˆì‚° ì´ˆê³¼ ì‹œ ì•Œë¦¼
if usage.cost > 50:
    print("âš ï¸ Budget exceeded!")
```

---

## ğŸ’¡ ê³ ê¸‰ ìµœì í™”

### 1. Claude Haiku ì‚¬ìš© (ì €ë¹„ìš© ëª¨ë¸)

ë‰´ìŠ¤ ë¶„ì„ì—ëŠ” Haiku ì‚¬ìš©:
```python
# analyzers/relevance_analyzer.py
self.model = "claude-3-5-haiku-20241022"  # Sonnet â†’ Haiku
```

**ê°€ê²©:**
- Input: $0.80 / 1M tokens (Sonnet: $3)
- Output: $4 / 1M tokens (Sonnet: $15)

**ë¹„ìš© ì ˆê°:**
- ë¶„ì„: $0.009 â†’ $0.002 (-78%)
- ì›”ê°„: $16.20 â†’ $3.60

**ì£¼ì˜:**
- ê¸€ ìƒì„±ì€ Sonnet ìœ ì§€ (í’ˆì§ˆ ì¤‘ìš”)

---

### 2. í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ

```python
# analyzers/relevance_analyzer.py
class RelevanceAnalyzer:
    def __init__(self):
        self.haiku = "claude-3-5-haiku-20241022"  # 1ì°¨ ë¶„ì„
        self.sonnet = "claude-3-5-sonnet-20241022"  # ê¸€ ìƒì„±

    def analyze_news(self, news):
        # 1ì°¨: Haikuë¡œ ë¹ ë¥¸ í•„í„°ë§
        score = self._quick_score(news, model=self.haiku)

        if score < 80:
            return None  # ì €í’ˆì§ˆ ì œì™¸

        # 2ì°¨: Sonnetìœ¼ë¡œ ìƒì„¸ ë¶„ì„ (ê³ í’ˆì§ˆë§Œ)
        return self._detailed_analysis(news, model=self.sonnet)
```

**íš¨ê³¼:**
- ì €í’ˆì§ˆ ë‰´ìŠ¤ëŠ” Haikuë¡œ ì €ë ´í•˜ê²Œ í•„í„°ë§
- ê³ í’ˆì§ˆë§Œ Sonnetìœ¼ë¡œ ì •ë°€ ë¶„ì„
- ì›”ê°„ ë¹„ìš©: -40%

---

## ğŸ“‹ ë¹„ìš© ì ˆê° ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `.env.budget` íŒŒì¼ ì‚¬ìš©
- [ ] `MIN_RELEVANCE_SCORE=80` ì„¤ì •
- [ ] Alpha Vantage ë¹„í™œì„±í™” (ì„ íƒ)
- [ ] ë¶„ì„ ê°„ê²© 2ì‹œê°„ ì´ìƒ
- [ ] ê¸€ ìƒì„± ê°„ê²© 4ì‹œê°„ ì´ìƒ
- [ ] ì¶”ì  ì¢…ëª© 10ê°œ ì´í•˜ë¡œ ì¶•ì†Œ
- [ ] Anthropic Consoleì—ì„œ ì¼ì¼ ì‚¬ìš©ëŸ‰ í™•ì¸
- [ ] ë°°ì¹˜ ì²˜ë¦¬ êµ¬í˜„ (ê³ ê¸‰)
- [ ] Haiku ëª¨ë¸ ì ìš© (ê³ ê¸‰)

---

## ğŸ¯ ì¶”ì²œ ì„¤ì • (ê°€ì„±ë¹„ ìµœê³ )

```bash
# .env.budget ì‚¬ìš©
cp .env.budget .env
nano .env

# API í‚¤ë§Œ ì…ë ¥
# ë‚˜ë¨¸ì§€ ì„¤ì •ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš©

# ì˜ˆìƒ ë¹„ìš©: $25-35/ì›”
# ì¼ì¼ ì»¨í…ì¸ : 18ê°œ ê¸€
# ì†ìµë¶„ê¸°: 52ëª… ë°©ë¬¸ì/ì¼
```

**ì´ ì„¤ì •ìœ¼ë¡œ ì‹œì‘í•˜ê³ , ìˆ˜ìµ ë°œìƒ í›„ ì ê·¹í˜•ìœ¼ë¡œ ì „í™˜í•˜ì„¸ìš”!**
